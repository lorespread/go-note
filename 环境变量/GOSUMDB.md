# 1 GOSUMDB 讲解

`GOSUMDB` 环境变量在 Go 语言中用于指定用来验证模块的 checksum（校验和）的数据库。从 Go 1.13 版本开始，Go 模块系统引入了一个名为 "Go Checksum Database" 的机制，用于保证模块内容的一致性和安全性。`GOSUMDB` 的默认值是 `sum.golang.org`，这是由 Go 团队提供的公共 checksum 数据库。

### `GOSUMDB` 的作用

1. **确保模块内容的不变性**：每当你下载一个模块，Go 工具会使用 `GOSUMDB` 指定的数据库来验证下载的模块的 checksum。这确保了你下载的模块内容是未被篡改的，与模块作者发布时的内容完全一致。

2. **增强安全性**：通过验证 checksum，`GOSUMDB` 有助于防止供应链攻击，例如，如果一个模块在你上次检查后被恶意修改，checksum 验证会失败，Go 工具会报错，防止了潜在的安全风险。

3. **提供可审计的模块来源**：`GOSUMDB` 不仅存储了模块版本的 checksum，还能为模块版本的真实性提供一个可信的来源，帮助开发者和组织在决定是否信任某个模块时做出更加明智的决策。

### 使用 `GOSUMDB`

-   **默认配置**：在大多数情况下，你不需要手动设置 `GOSUMDB`，因为 Go 使用 `sum.golang.org` 作为默认的 checksum 数据库。这个服务自动为公共模块提供服务。

-   **自定义配置**：如果因为网络环境或安全政策的原因需要使用不同的 checksum 数据库，或者完全禁用 checksum 数据库，你可以通过设置 `GOSUMDB` 环境变量来实现。例如：

    -   **使用自定义的 checksum 数据库**：
        ```sh
        export GOSUMDB=sum.example.com
        ```
    -   **禁用 checksum 数据库**：
        ```sh
        export GOSUMDB=off
        ```

### 注意事项

-   禁用 `GOSUMDB`（将其设置为 `off`）将关闭模块下载的校验和验证功能。虽然这在某些特殊情况下可能是必要的，但一般不推荐这样做，因为它会降低项目依赖管理的安全性。

-   在企业或组织内部，可能会搭建私有的 checksum 数据库来满足特定的安全或合规需求。在这种情况下，可以通过配置 `GOSUMDB` 来指向这些私有服务。

总之，`GOSUMDB` 环境变量是 Go 模块系统中一个重要的安全特性，它通过校验和验证机制来保证模块的安全和一致性。
