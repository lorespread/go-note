# 1 ä¸­é—´ä»¶çš„æ‰§è¡Œé¡ºåº

-   å…ˆå…¨å±€åå±€éƒ¨ï¼ˆå³`å…ˆæ‰§è¡Œå…¨å±€æ³¨å†Œçš„ä¸­é—´ä»¶ï¼Œç„¶åå†æ‰§è¡Œè·¯ç”±çº§åˆ«æ³¨å†Œçš„ä¸­é—´ä»¶`ï¼‰
-   ä¸ç®¡æ˜¯å…¨å±€è¿˜æ˜¯å±€éƒ¨ï¼ŒæŒ‰ç…§`æ³¨å†Œé¡ºåº`æ‰§è¡Œ

## 1.1 ä¾‹å­ -1

æ³¨å†Œä¸¤ä¸ªå…¨å±€ä¸­é—´ä»¶

```go
// Register global's middleware
func MiddlewareRegister(h *server.Hertz) {
	h.Use(ExceptionCatchMiddleware())
	h.Use(AuthJwtMiddleware())
	h.Use(AuthSignMiddleware())
}

func AuthSignMiddleware() app.HandlerFunc {
	return func(ctx context.Context, c *app.RequestContext) {
		fmt.Println("ğŸ”¥--pre-this is auth sign middleware")
		c.Next(ctx)
		fmt.Println("ğŸš€--post-this is auth sign middleware")
	}
}
```

è®¿é—®è·¯ç”±åï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š

```shell
ğŸ”¥--pre-this is auth jwt middleware
ğŸ”¥--pre-this is auth sign middleware
==========this is controller handle
<nil> false
ğŸš€--post-this is auth sign middleware
ğŸš€--post-this is auth jwt middleware

```

æ•´ä¸ªé“¾æ¡å¾ˆåƒä¸€ä¸ªæ´‹è‘±ï¼Œè®¿é—®ä¸€å±‚ä¸€å±‚å‘å†…è¿è¡Œï¼Œæœ€å†…å±‚çš„ controller æ‰§è¡Œå®Œæ¯•åï¼Œå†ä¸€å±‚ä¸€å±‚å‘å¤–è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°

-   c.Next(ctx) ä¹‹å‰çš„é€»è¾‘æ˜¯æŒ‰ç…§æ³¨å†Œé¡ºåºç”±å¤–åˆ°å†…æ‰§è¡Œ
-   c.Next(ctx) ä¹‹åçš„é€»è¾‘æ˜¯æŒ‰ç…§æ³¨å†Œé¡ºåºæœ‰å†…åˆ°å¤–æ‰§è¡Œ

## ä¾‹å­ -2

```go
// Register global's middleware
func MiddlewareRegister(h *server.Hertz) {
	h.Use(ExceptionCatchMiddleware())
	h.Use(AuthSignMiddleware())
}


// æ³¨å†Œè·¯ç”±çº§åˆ«çš„ä¸­é—´ä»¶
apiRouter := consoleRouter.Group("api/", middleware.AuthJwtMiddleware())

```

è®¿é—®æ¥å£ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š

```shell
ğŸ”¥--pre-this is auth sign middleware
ğŸ”¥--pre-this is auth cookie middleware
==========this is controller handle
admin true
ğŸš€--post-this is auth cookie middleware
ğŸš€--post-this is auth sign middleware

```
