# 1 同一个包下的文件，A 可以完全访问 B 的私有变量，对吧

是的，你的理解是正确的。在 Go 语言中，包是组织代码的基本单位。同一个包内的所有文件都属于同一个命名空间，这意味着它们之间可以自由地访问对方的所有内容，包括那些未导出的（私有的）变量和函数。

所以，当你将单元测试文件（例如 `abs_test.go`）放在与被测试代码文件（例如 `abs.go`）相同的包中时，测试代码可以直接访问和使用这些私有变量和函数。这种方式简化了对包内部行为的测试，因为你不需要公开更多的接口仅仅为了测试目的。

### 示例

假设你在 `abs.go` 中有一个私有变量：

```go
// abs.go
package mymath

var secretValue = 42
```

你可以在同一个包下的 `abs_test.go` 文件中直接访问这个变量：

```go
// abs_test.go
package mymath

import "testing"

func TestSecretValue(t *testing.T) {
    if secretValue != 42 {
        t.Errorf("secretValue = %d; want 42", secretValue)
    }
}
```

这个测试函数 `TestSecretValue` 直接引用了 `secretValue`，尽管它是一个未导出的（私有的）变量。这是完全有效的，因为测试文件和源代码文件是属于同一个包的。

### 注意

虽然同包测试允许测试代码访问私有变量，但是在设计包和编写测试时应当保持一定的原则：

-   尽量避免过度依赖内部实现的测试，因为这会降低代码的封装性和模块化。好的测试应该尽可能地测试公共接口的行为。
-   当确实需要测试包的内部行为时，同包测试提供了一种方便的方法来实现这一点，但应当谨慎使用，以保持代码的清晰和维护性。

通过遵守这些原则，你可以有效地利用同包测试的优势，同时避免一些潜在的设计和维护问题。
